#!/usr/bin/env bash
# Script to display information about subdomains

# Function to query and display subdomain information
display_subdomain_info() {
    local subdomain=$1
    local domain=$2
    
    # Use dig to query the DNS record and awk to extract the information
    # shellcheck disable=SC2086
    dig "$subdomain.$domain" | awk -v subdomain="$subdomain" '/ANSWER SECTION:/{getline; print "The subdomain " subdomain " is a " $4 " record and points to " $5}'
}

# Main script logic
domain=$1
subdomain=$2

if [ -z "$domain" ]; then
    echo "Error: domain parameter is mandatory"
    exit 1
fi

# If subdomain is specified, display only that subdomain
if [ -n "$subdomain" ]; then
    display_subdomain_info "$subdomain" "$domain"
else
    # Display information for default subdomains in specific order
    display_subdomain_info "www" "$domain"
    display_subdomain_info "lb-01" "$domain"
    display_subdomain_info "web-01" "$domain"
    display_subdomain_info "web-02" "$domain"
fi
